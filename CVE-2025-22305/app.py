from flask import Flask, request, render_template
import os

app = Flask(__name__)

@app.route("/")
def home():
    return '''
        <h2>File Viewer</h2>
        <form action="/view" method="get">
            Filename: <input name="file" type="text">
            <input type="submit" value="View">
        </form>
    '''

@app.route("/view")
def view_file():
    filename = request.args.get("file")
    file_path = os.path.join("files", filename)

    try:
        with open(file_path, "r") as f:
            content = f.read()
        return render_template("viewer.html", filename=filename, content=content)
    except Exception as e:
        return f"Error: {str(e)}"

if __name__ == "__main__":
    app.run(debug=True)
