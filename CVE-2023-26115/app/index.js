const express = require("express");
const wrap = require("word-wrap"); // vulnerable version
const app = express();

app.use(express.text({ type: "*/*" })); // <-- important to parse plain text

app.post("/wrap", (req, res) => {
    try {
        const input = req.body;

        // Ensure input is a string
        if (typeof input !== "string") {
            return res.status(400).send("❌ Error: Input must be a string");
        }

        const result = wrap(input, { width: 80 });
        res.send(result);
    } catch (err) {
        res.status(500).send(`❌ Error: ${err.message}`);
    }
});

app.listen(3000, () => {
    console.log("🚀 Server running on http://localhost:3000");
});
